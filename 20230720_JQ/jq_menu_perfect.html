<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        img {
            height: 160px;
            margin: 0 auto;

        }

        .border {
            height: 200px;
        }
    </style>

</head>
<div class="container">
    <div class="row mt-3">
        <div class="col-4">
            <img src="https://www.buygood.com.tw/images/n01-L.jpg">
            <div class="text-center">
                <span>炸排骨飯</span>
                <label for="eat01">100</label>
                <br>
                <input type="radio" name="eatBtn" id="eat01" value="eat01">
            </div>
        </div>
        <div class="col-4">
            <img src="https://www.buygood.com.tw/images/n03-L.jpg">
            <div class="text-center">
                <span>炸紅麴肉飯</span>
                <label for="eat02">110</label>
                <br>
                <input type="radio" name="eatBtn" id="eat02" value="eat02">
            </div>
        </div>
        <div class="col-4">
            <img src="https://www.buygood.com.tw/images/n0012-L.jpg">
            <div class="text-center">
                <span>黃金塔塔鱈魚排飯</span>
                <label for="eat03">110</label>
                <br>
                <input type="radio" name="eatBtn" id="eat03" value="eat03">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-2">
            <input type="checkbox" class="btn-check" name="eatselect" id="eatselect01" autocomplete="off">
            <label class="btn btn-outline-primary" for="eatselect01">加飯</label>
        </div>
        <div class="col-2">
            <input type="checkbox" class="btn-check" name="eatselect" id="eatselect02" autocomplete="off">
            <label class="btn btn-outline-primary" for="eatselect02">加蛋</label>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-4">
            <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001141659501.jpg">
            <div class="text-center">
                <span>咖啡星冰樂</span>
                <label for="drink01">160</label>
                <br>
                <input type="radio" name="drinkBtn" id="drink01" value="drink01">
            </div>
        </div>
        <div class="col-4">
            <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001141919985.jpg">
            <div class="text-center">
                <span>焦糖星冰樂</span>
                <label for="drink02">150</label>
                <br>
                <input type="radio" name="drinkBtn" id="drink02" value="drink02">
            </div>
        </div>
        <div class="col-4">
            <img src="https://www.starbucks.com.tw/common/objects/images/product/20211001141955676.jpg">
            <div class="text-center">
                <span>摩卡可可碎片星冰樂</span>
                <label for="drink03">170</label>
                <br>
                <input type="radio" name="drinkBtn" id="drink03" value="drink03">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-2">
            <input type="checkbox" class="btn-check" name="drinkselect" id="drinkselect01" autocomplete="off">
            <label class="btn btn-outline-primary" for="drinkselect01">少冰</label>
        </div>
        <div class="col-2">
            <input type="checkbox" class="btn-check" name="drinkselect" id="drinkselect02" autocomplete="off">
            <label class="btn btn-outline-primary" for="drinkselect02">少糖</label>
        </div>
    </div>
    <div class="row">
        <button type="button" class="btn btn-danger">Danger</button>
    </div>
    <div class="row border border-secondary mt-3">
        <div class="col result">
        </div>
    </div>
</div>

<body>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"
        integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        $(function () {
            $("title").text('')
            const myBtn = $('.btn-danger')
            const resultlist = $('.result')
            myBtn.click(function () {
                const eatBtn = $('input[type="radio"][name="eatBtn"]:checked')
                const eatselectBtn = $('input[type="checkbox"][name="eatselect"]:checked')
                const drinkBtn = $('input[type="radio"][name="drinkBtn"]:checked')
                const drinkselectBtn = $('input[type="checkbox"][name="drinkselect"]:checked')
                let eatname = eatBtn.parent().find('span').text()
                let eatprice = eatBtn.parent().find('label').text()
                let drinkname = drinkBtn.parent().find('span').text()
                let drinkprice = drinkBtn.parent().find('label').text()
                console.log("eatname", eatname)
                // console.log("eatBtn", eatBtn)
                // console.log("drinkBtn", drinkBtn)
                // console.log("eatBtn.parent()", eatBtn.parent().find('label').text())
                // console.log("eatBtn.parent()", eatBtn.parent().find('span').text())
                // console.log("drinkBtn.parent()", drinkBtn.parent().find('label').text())
                // console.log("drinkBtn.parent()", drinkBtn.parent().find('span').text())
                if (eatname != '') {
                    let eatindex = ''
                    if (eatselectBtn.length != '') {
                        eatselectBtn.each(function (key, value1) {
                            eatindex += $(value1).parent().find('label').text()
                        })
                        eatindex = "(" + eatindex + ")"
                    }
                    resultlist.append(`<div>
                                            ${eatname}1份${eatindex}${eatprice}元
                                            <button class="btn btn-success"><i class="fa-solid fa-xmark"></i></button>
                                        </div>`)
                }
                if (drinkname != '') {
                    let drinkindex = ''
                    // 判斷陣列有無值
                    if (drinkselectBtn.length != '') {
                        // 抓取每個陣列位置
                        drinkselectBtn.each(function (key, value2) {
                            // 尋找節點取得備註
                            drinkindex += $(value2).parent().find('label').text()
                        })
                        drinkindex = "(" + drinkindex + ")"
                    }
                    // 將飲料明細增加於明細列
                    resultlist.append(`<div>
                                            ${drinkname}1份${drinkindex}${drinkprice}元
                                            <button class="btn btn-success"><i class="fa-solid fa-xmark"></i></button>
                                        </div>`)
                }
                // 建立明細後方取消機制
                const delBtn = $('.btn-success')
                delBtn.click(function () {
                    let nowDelBtn = $(this);
                    let nowRow = nowDelBtn.parent();
                    nowRow.remove();
                });
                // eatBtn[0].checked = false;
                // drinkBtn[0].checked = false;
                // 取消radio及checkbox checked狀態
                eatBtn.prop('checked', false);
                drinkBtn.prop('checked', false);
                eatselectBtn.prop('checked', false);
                drinkselectBtn.prop('checked', false);
            })
        })
    </script>
</body>

</html>